\section{Oscillatory drive problem}
\subsection{Préliminaires}
On considère un hamiltonien dépendant du temps de la forme 

\begin{equation}
    H(t) = H_0 + V(t)
\end{equation}

où $H_0 = \sum_{k} \lambda_k \ket{k}\bra{k}$ dans sa base d'états propres et $V(t) = X\cos(\omega t)$ pour un certain opérateur $X$. En décomposant le cosinus en exponentielles complexes, 

\begin{equation*}
    H(t) = H_0 + X\left(\frac{e^{i \omega t} + e^{-i\omega t}}{2}\right)
\end{equation*}

Pour une variation infime de temps et en utilisant la définition de (2.1), on trouve (et ce n'est pas très beau)

\begin{equation*}
    U(t+\delta t, t) = \sum_{n=0}^{\infty} (-i)^n \int_{t}^{t+\delta t}\int_{t}^{t_n}...\int_{t}^{t_2}H(t_n)...H(t_1)dt_1 ... dt_n
\end{equation*}
\begin{equation*}
    = \sum_{n=0}^{\infty} (-i)^n \int_{t}^{t+\delta t}\int_{t}^{t_n}...\int_{t}^{t_2}\left(H_0 + 
    V(t_n)\right)...\left(H_0 + V(t_1)\right)dt_1 ... dt_n
\end{equation*}
\begin{equation*}
    = \sum_{n=0}^{\infty} (-i)^n \int_{t}^{t+\delta t}\int_{t}^{t_n}...\int_{t}^{t_2} \left(H_0...H_0 + H_0...H_0V(t_1) + ... + V(t_n)H_0...H_0 + ... + V(t_n)...V(t_1)\right)dt_1 ... dt_n
\end{equation*}
\begin{equation}
    = \sum_{n=0}^{\infty} \int_{t}^{t+\delta t}\int_{t}^{t_n}...\int_{t}^{t_2} (-i)^n H_0...H_0 dt_1...dt_n + ... + \sum_{n=0}^{\infty} \int_{t}^{t+\delta t}\int_{t}^{t_n}...\int_{t}^{t_2}(-i)^n V(t_n)...V(t_1) dt_1...dt_n
\end{equation}

On peut voir que la distribution des termes correspond à l'ensemble des combinaisons de $n$ opérateurs où on choisit soit $H_0$ ou $V(t)$ pour chacun d'eux. Il y a donc au total $2^n$ termes chacun $n$ opérateurs pouvant alterner entre des suites de $H_0$ ou de $V(t)$ de différentes longueurs. 

\subsection{Dérivation (partie 1)}
On considère maintenant pour la suite $n$ comme étant le nombre de $V(t)$ présents dans chaque terme de (2.2) et on omet temporairement les indices $V(t_j)$ pour éviter de se mélanger avec l'ancienne écriture. Il faut alors un nouveau moyen d'écrire (2.2) avec ce changement de variables. Pour se faire, on introduit les $m_i$ qui indiqueront combien d'applications de $H_0$ il y a avant une application de $V(t)$. Par exemple,

\begin{equation*}
    H_0V(t)H_0H_0 = (H_0)^1V(t)(H_0)^2 = (H_0)^{m_1}V(t)(H_0)^{m_0} \implies m_0 = 2, m_1 = 1
\end{equation*}
\begin{equation*}
    V(t)V(t) = (H_0)^0V(t)(H_0)^0V(t)(H_0)^0 \implies m_0 = m_1 = m_2 = 0
\end{equation*}

En général, ils sont indexés de $m_0$ à $m_n$, car pour un nombre $n$ de $V(t)$, on peut avoir jusqu'à $n+1$ blocs $H_0...H_0$ ayant des longueurs différentes.

\begin{equation*}
    \underline{H_0H_0}V(t) : \text{ 1 bloc, } \underline{H_0}V(t)\underline{H_0} : \text{ 2 blocs, } V(t)\underline{H_0H_0} : \text{ 1 bloc}
\end{equation*}



Cependant, par la somme infinie de (2.2), ces blocs peuvent être arbitrairement longs, faisant en sorte que les $m_i$ peuvent prendre des valeurs entre 0 et l'infini. Il est plus concis de les mettre dans un vecteur $\boldsymbol{m} = \left[m_n, ..., m_0\right] \in \mathbb{Z}^{n+1}_+$. Ainsi, de manière générale, on peut écrire toute chaîne d'opérateurs comme 

\begin{equation}
    (H_0)^{m_n}V(t)(H_0)^{m_{n-1}}V(t)...(H_0)^{m_1}V(t)(H_0)^{m_0}
\end{equation}

dont on obtient sa longueur $M$ (le nombre total d'opérateurs) grâce à 

\begin{equation}
    M = \left(\sum_{i=0}^{n}m_i\right) + n
\end{equation}

\subsection{Dérivation (partie 2)}
La prochaine étape est maintenant de retrouver les indices dans les $V(t)$ avec notre nouvelle notation. On sait déjà qu'il y aura $n$ opérateurs $V(t)$, mais on doit pouvoir retrouver leur positionnement dans la chaîne d'opérateurs. On peut simplement compter combien il y a de $H_0$ et d'autres $V(t)$ avant celui qui nous intéresse. Par exemple, pour $n=2$, on pourrait avoir la chaîne

\begin{equation*}
    H_0V(t)H_0V(t)H_0 \implies \boldsymbol{m} = \left[1, 1, 1\right]
\end{equation*}

Le premier $V(t)$ s'applique nécessairement après $m_0 = 1$ opérateur $H_0$. Le deuxième s'applique nécessairement après $m_0 = 1$ opérateur $H_0$, un $V(t)$ puis $m_1 = 1$ opérateur $H_0$. Si $p \in \left[1..n\right]$ est une variable qui passe en travers des $n$ opérateurs $V(t)$, alors il est facile de voir qu'on indexe $V(t)$ par la fonction 

\begin{equation}
    l(p) = \left(\sum_{j=0}^{p-1}m_j\right) + p
\end{equation}

Pour reprendre l'exemple, on aurait 

\begin{equation*}
    H_0V(t_{l(2)})H_0V(t_{l(1)})H_0 = H_0V(t_{m_1 + m_0 + 2})H_0V(t_{m_0 + 1})H_0 = H_0V(t_4)H_0V(t_2)H_0
\end{equation*}

ce qui exactement ce qu'on aurait dans (2.2).

\subsection{Dérivation (partie 3)}
Ensuite, on étend les $V(t_{l(p)})$ selon leur définition :

\begin{equation*}
    V(t_{l(p)}) = X\left(\frac{e^{i\omega t_{l(p)}} + e^{-i\omega t_{l(p)}}}{2}\right)
\end{equation*}











\newpage
Dans le contexte général de la partie avec les intégrales de (2.2), les équations (2.3) et (2.4) donnent 

\begin{equation*}
    \int_{t}^{t+\delta t}\int_{t}^{t_M}...\int_{t}^{t_2}(-i)^M (H_0)^{m_n}V(t)...V(t)(H_0)^{m_0}dt_1...dt_M
\end{equation*}
\begin{equation}
    = \int_{t}^{t+\delta t}\int_{t}^{t_M}...\int_{t}^{t_2} (-i)^n (-iH_0)^{m_n}V(t)...V(t)(-iH_0)^{m_0}dt_1...dt_M
\end{equation}



% Les $V(t)$, selon leur positionnement, viennent briser des suites de $H_0...H_0$ en plusieurs petites chaînes. Par exemple, un des termes dans (2.2) est 

% \begin{equation*}
%     H_0...H_0V(t_1) = (H_0)^{n-1}V(t_1)    
% \end{equation*}

% et on voit alors qu'il y a une chaîne de $n-1$ opérateurs $H_0$ à gauche de $V(t_1)$. Sinon, un des termes présents

% \begin{equation*}
%     H_0...H_0V(t_4)H_0H_0V(t_1) = (H_0)^{n-4}V(t_4)(H_0)^2V(t_1)    
% \end{equation*}

% nous dit qu'il y a d'abord $V(t_1)$, puis deux $H_0$, ensuite $V(t_4)$ et finalement $n-4$ opérateurs $H_0$. De plus, par définition, on peut remplacer les $V(t)$ par $X\left(\frac{e^{i \omega t} + e^{-i\omega t}}{2}\right)$. Ainsi,

% \begin{equation*}
%     (H_0)^{n-1}V(t_1) = (H_0)^{n-1}X\left(\frac{e^{i \omega t_1} + e^{-i\omega t_1}}{2}\right) = \frac{1}{2}\left(e^{i \omega t_1} + e^{-i\omega t_1}\right)(H_0)^{n-1}X
% \end{equation*}
% \begin{equation*}
%     (H_0)^{n-4}V(t_4)(H_0)^2V(t_1) = \frac{1}{2^2}\left(e^{i \omega t_1} + e^{-i\omega t_1}\right)\left(e^{i \omega t_4} + e^{-i\omega t_4}\right)(H_0)^{n-4}X(H_0)^2X
% \end{equation*}








